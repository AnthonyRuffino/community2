{"filter":false,"title":"mathersCallLogger.js","tooltip":"/client/app/mathersCallLogger.js","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":82,"column":20},"end":{"row":82,"column":21},"action":"insert","lines":["l"],"id":151}],[{"start":{"row":82,"column":21},"end":{"row":82,"column":22},"action":"insert","lines":[" "],"id":152}],[{"start":{"row":68,"column":17},"end":{"row":68,"column":21},"action":"remove","lines":["Chat"],"id":153},{"start":{"row":68,"column":17},"end":{"row":68,"column":28},"action":"insert","lines":["Call Logger"]}],[{"start":{"row":64,"column":0},"end":{"row":65,"column":66},"action":"remove","lines":["","var LOGIN_EXCEPTION_MESSAGE = \"No user found/incorrect password.\";"],"id":154}],[{"start":{"row":84,"column":0},"end":{"row":99,"column":7},"action":"remove","lines":["    ","    //Get first 6 values of guid. This will be the session id of anonomous ","    var guid = ChatServer.guidFactory.generate(true, 2);","    ","    //Initialize session as Anonymous and un-authorized","    var session = {};","    session.userName = 'Anonymous-' + guid;","    session.guid = guid;","    session.isAuthorized = false;","    ","    //place session in the ChatServer.sessions array","    //ChatServer.sessions[session.userName] = session;","    ","    socket.set('name', String(session.userName), function (err) {","        updateRoster();","    });"],"id":155}],[{"start":{"row":85,"column":0},"end":{"row":88,"column":4},"action":"remove","lines":["    ","    ","    socket.emit('setName', { name: session.userName });","    "],"id":156}],[{"start":{"row":84,"column":0},"end":{"row":88,"column":7},"action":"remove","lines":["","","    ChatServer.messages.forEach(function (data) {","      socket.emit('message', data);","    });"],"id":157}],[{"start":{"row":86,"column":4},"end":{"row":87,"column":0},"action":"remove","lines":["",""],"id":158}],[{"start":{"row":86,"column":0},"end":{"row":86,"column":4},"action":"remove","lines":["    "],"id":159}],[{"start":{"row":85,"column":0},"end":{"row":86,"column":0},"action":"remove","lines":["",""],"id":160}],[{"start":{"row":90,"column":0},"end":{"row":90,"column":27},"action":"remove","lines":["            updateRoster();"],"id":161}],[{"start":{"row":89,"column":77},"end":{"row":90,"column":0},"action":"remove","lines":["",""],"id":162}],[{"start":{"row":93,"column":15},"end":{"row":93,"column":22},"action":"remove","lines":["message"],"id":163},{"start":{"row":93,"column":15},"end":{"row":93,"column":16},"action":"insert","lines":["l"]}],[{"start":{"row":93,"column":16},"end":{"row":93,"column":17},"action":"insert","lines":["o"],"id":164}],[{"start":{"row":93,"column":17},"end":{"row":93,"column":18},"action":"insert","lines":["g"],"id":165}],[{"start":{"row":93,"column":31},"end":{"row":93,"column":34},"action":"remove","lines":["msg"],"id":166},{"start":{"row":93,"column":31},"end":{"row":93,"column":32},"action":"insert","lines":["l"]}],[{"start":{"row":93,"column":32},"end":{"row":93,"column":33},"action":"insert","lines":["o"],"id":167}],[{"start":{"row":93,"column":33},"end":{"row":93,"column":34},"action":"insert","lines":["g"],"id":168}],[{"start":{"row":94,"column":10},"end":{"row":94,"column":14},"action":"remove","lines":["text"],"id":169},{"start":{"row":94,"column":10},"end":{"row":94,"column":11},"action":"insert","lines":["f"]}],[{"start":{"row":94,"column":11},"end":{"row":94,"column":12},"action":"insert","lines":["i"],"id":170}],[{"start":{"row":94,"column":12},"end":{"row":94,"column":13},"action":"insert","lines":["e"],"id":171}],[{"start":{"row":94,"column":13},"end":{"row":94,"column":14},"action":"insert","lines":["l"],"id":172}],[{"start":{"row":94,"column":14},"end":{"row":94,"column":15},"action":"insert","lines":["d"],"id":173}],[{"start":{"row":94,"column":15},"end":{"row":94,"column":16},"action":"insert","lines":["1"],"id":174}],[{"start":{"row":94,"column":26},"end":{"row":94,"column":29},"action":"remove","lines":["msg"],"id":175},{"start":{"row":94,"column":26},"end":{"row":94,"column":27},"action":"insert","lines":["l"]}],[{"start":{"row":94,"column":27},"end":{"row":94,"column":28},"action":"insert","lines":["o"],"id":176}],[{"start":{"row":94,"column":28},"end":{"row":94,"column":29},"action":"insert","lines":["g"],"id":177}],[{"start":{"row":94,"column":33},"end":{"row":94,"column":35},"action":"remove","lines":["''"],"id":178},{"start":{"row":94,"column":33},"end":{"row":94,"column":34},"action":"insert","lines":["l"]}],[{"start":{"row":94,"column":34},"end":{"row":94,"column":35},"action":"insert","lines":["o"],"id":179}],[{"start":{"row":94,"column":35},"end":{"row":94,"column":36},"action":"insert","lines":["g"],"id":180}],[{"start":{"row":94,"column":36},"end":{"row":94,"column":37},"action":"insert","lines":["."],"id":181}],[{"start":{"row":94,"column":37},"end":{"row":94,"column":38},"action":"insert","lines":["f"],"id":182}],[{"start":{"row":94,"column":38},"end":{"row":94,"column":39},"action":"insert","lines":["i"],"id":183}],[{"start":{"row":94,"column":39},"end":{"row":94,"column":40},"action":"insert","lines":["l"],"id":184}],[{"start":{"row":94,"column":40},"end":{"row":94,"column":41},"action":"insert","lines":["e"],"id":185}],[{"start":{"row":94,"column":41},"end":{"row":94,"column":42},"action":"insert","lines":["d"],"id":186}],[{"start":{"row":94,"column":42},"end":{"row":94,"column":43},"action":"insert","lines":["1"],"id":187}],[{"start":{"row":94,"column":42},"end":{"row":94,"column":43},"action":"remove","lines":["1"],"id":188}],[{"start":{"row":94,"column":41},"end":{"row":94,"column":42},"action":"remove","lines":["d"],"id":189}],[{"start":{"row":94,"column":40},"end":{"row":94,"column":41},"action":"remove","lines":["e"],"id":190}],[{"start":{"row":94,"column":39},"end":{"row":94,"column":40},"action":"remove","lines":["l"],"id":191}],[{"start":{"row":94,"column":39},"end":{"row":94,"column":40},"action":"insert","lines":["e"],"id":192}],[{"start":{"row":94,"column":40},"end":{"row":94,"column":41},"action":"insert","lines":["l"],"id":193}],[{"start":{"row":94,"column":41},"end":{"row":94,"column":42},"action":"insert","lines":["s"],"id":194}],[{"start":{"row":94,"column":41},"end":{"row":94,"column":42},"action":"remove","lines":["s"],"id":195}],[{"start":{"row":94,"column":41},"end":{"row":94,"column":42},"action":"insert","lines":["d"],"id":196}],[{"start":{"row":94,"column":42},"end":{"row":94,"column":43},"action":"insert","lines":["1"],"id":197}],[{"start":{"row":94,"column":43},"end":{"row":94,"column":44},"action":"insert","lines":[" "],"id":198}],[{"start":{"row":94,"column":44},"end":{"row":94,"column":45},"action":"insert","lines":["|"],"id":199}],[{"start":{"row":94,"column":45},"end":{"row":94,"column":46},"action":"insert","lines":["|"],"id":200}],[{"start":{"row":94,"column":46},"end":{"row":94,"column":47},"action":"insert","lines":[" "],"id":201}],[{"start":{"row":94,"column":47},"end":{"row":94,"column":49},"action":"insert","lines":["''"],"id":202}],[{"start":{"row":94,"column":51},"end":{"row":95,"column":0},"action":"insert","lines":["",""],"id":203},{"start":{"row":95,"column":0},"end":{"row":95,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":95,"column":6},"end":{"row":95,"column":51},"action":"insert","lines":["var field1 = String(log || log.field1 || '');"],"id":204}],[{"start":{"row":95,"column":51},"end":{"row":96,"column":0},"action":"insert","lines":["",""],"id":205},{"start":{"row":96,"column":0},"end":{"row":96,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":96,"column":6},"end":{"row":96,"column":51},"action":"insert","lines":["var field1 = String(log || log.field1 || '');"],"id":206}],[{"start":{"row":95,"column":15},"end":{"row":95,"column":16},"action":"remove","lines":["1"],"id":208},{"start":{"row":95,"column":15},"end":{"row":95,"column":16},"action":"insert","lines":["2"]}],[{"start":{"row":96,"column":15},"end":{"row":96,"column":16},"action":"remove","lines":["1"],"id":209},{"start":{"row":96,"column":15},"end":{"row":96,"column":16},"action":"insert","lines":["3"]}],[{"start":{"row":98,"column":11},"end":{"row":98,"column":15},"action":"remove","lines":["text"],"id":210},{"start":{"row":98,"column":11},"end":{"row":98,"column":17},"action":"insert","lines":["field1"]}],[{"start":{"row":107,"column":19},"end":{"row":107,"column":26},"action":"remove","lines":["message"],"id":211},{"start":{"row":107,"column":19},"end":{"row":107,"column":20},"action":"insert","lines":["l"]}],[{"start":{"row":107,"column":20},"end":{"row":107,"column":21},"action":"insert","lines":["o"],"id":212}],[{"start":{"row":107,"column":21},"end":{"row":107,"column":22},"action":"insert","lines":["g"],"id":213}],[{"start":{"row":107,"column":25},"end":{"row":107,"column":29},"action":"remove","lines":["data"],"id":214},{"start":{"row":107,"column":25},"end":{"row":107,"column":26},"action":"insert","lines":["l"]}],[{"start":{"row":107,"column":26},"end":{"row":107,"column":27},"action":"insert","lines":["o"],"id":215}],[{"start":{"row":107,"column":27},"end":{"row":107,"column":28},"action":"insert","lines":["g"],"id":216}],[{"start":{"row":102,"column":0},"end":{"row":105,"column":10},"action":"remove","lines":["        var data = {","          name: name,","          text: text","        };"],"id":217}],[{"start":{"row":102,"column":0},"end":{"row":103,"column":0},"action":"remove","lines":["",""],"id":218}],[{"start":{"row":101,"column":47},"end":{"row":102,"column":0},"action":"remove","lines":["",""],"id":219}],[{"start":{"row":103,"column":19},"end":{"row":103,"column":27},"action":"remove","lines":["messages"],"id":220},{"start":{"row":103,"column":19},"end":{"row":103,"column":20},"action":"insert","lines":["l"]}],[{"start":{"row":103,"column":20},"end":{"row":103,"column":21},"action":"insert","lines":["o"],"id":221}],[{"start":{"row":103,"column":21},"end":{"row":103,"column":22},"action":"insert","lines":["g"],"id":222}],[{"start":{"row":103,"column":22},"end":{"row":103,"column":23},"action":"insert","lines":["s"],"id":223}],[{"start":{"row":103,"column":29},"end":{"row":103,"column":33},"action":"remove","lines":["data"],"id":224},{"start":{"row":103,"column":29},"end":{"row":103,"column":30},"action":"insert","lines":["l"]}],[{"start":{"row":103,"column":30},"end":{"row":103,"column":31},"action":"insert","lines":["o"],"id":225}],[{"start":{"row":103,"column":31},"end":{"row":103,"column":32},"action":"insert","lines":["g"],"id":226}],[{"start":{"row":23,"column":0},"end":{"row":26,"column":7},"action":"remove","lines":["    socket.on('roster', function (names) {","        $scope.roster = names;","        $scope.$apply();","    });"],"id":227}],[{"start":{"row":22,"column":4},"end":{"row":23,"column":0},"action":"remove","lines":["",""],"id":228}],[{"start":{"row":22,"column":0},"end":{"row":22,"column":4},"action":"remove","lines":["    "],"id":229}],[{"start":{"row":21,"column":7},"end":{"row":22,"column":0},"action":"remove","lines":["",""],"id":230}],[{"start":{"row":23,"column":0},"end":{"row":26,"column":7},"action":"remove","lines":["    socket.on('setName', function (data) {","        $scope.name = data.name;","        $scope.$apply();","    });"],"id":231}],[{"start":{"row":22,"column":4},"end":{"row":23,"column":0},"action":"remove","lines":["",""],"id":232}],[{"start":{"row":22,"column":0},"end":{"row":22,"column":4},"action":"remove","lines":["    "],"id":233}],[{"start":{"row":21,"column":7},"end":{"row":22,"column":0},"action":"remove","lines":["",""],"id":234}],[{"start":{"row":34,"column":0},"end":{"row":37,"column":6},"action":"remove","lines":["    ","    $scope.getName = function getName() {","        socket.emit('getName');","    };"],"id":235}],[{"start":{"row":33,"column":4},"end":{"row":34,"column":0},"action":"remove","lines":["",""],"id":236}],[{"start":{"row":55,"column":0},"end":{"row":55,"column":36},"action":"remove","lines":["    ChatServer.hasher = data.hasher;"],"id":237}],[{"start":{"row":55,"column":0},"end":{"row":57,"column":38},"action":"remove","lines":["","    //ChatServer.deleteKey = data.deleteKey;","    //ChatServer.bcrypt = data.bcrypt;"],"id":238}],[{"start":{"row":56,"column":0},"end":{"row":56,"column":46},"action":"remove","lines":["    ChatServer.guidFactory = data.guidFactory;"],"id":239}],[{"start":{"row":55,"column":0},"end":{"row":56,"column":0},"action":"remove","lines":["",""],"id":240}],[{"start":{"row":56,"column":15},"end":{"row":56,"column":23},"action":"remove","lines":["messages"],"id":241},{"start":{"row":56,"column":15},"end":{"row":56,"column":16},"action":"insert","lines":["l"]}],[{"start":{"row":56,"column":16},"end":{"row":56,"column":17},"action":"insert","lines":["o"],"id":242}],[{"start":{"row":56,"column":17},"end":{"row":56,"column":18},"action":"insert","lines":["g"],"id":243}],[{"start":{"row":56,"column":18},"end":{"row":56,"column":19},"action":"insert","lines":["s"],"id":244}],[{"start":{"row":57,"column":28},"end":{"row":58,"column":29},"action":"remove","lines":["","    ChatServer.sessions = {};"],"id":245}],[{"start":{"row":54,"column":34},"end":{"row":55,"column":0},"action":"remove","lines":["",""],"id":246}],[{"start":{"row":76,"column":42},"end":{"row":76,"column":43},"action":"remove","lines":["1"],"id":247},{"start":{"row":76,"column":42},"end":{"row":76,"column":43},"action":"insert","lines":["2"]}],[{"start":{"row":77,"column":42},"end":{"row":77,"column":43},"action":"remove","lines":["1"],"id":248},{"start":{"row":77,"column":42},"end":{"row":77,"column":43},"action":"insert","lines":["3"]}],[{"start":{"row":88,"column":0},"end":{"row":97,"column":7},"action":"remove","lines":["    ","    ","    socket.on('getName', function (msg) {","      socket.get('name', function (err, name) {","        var data = {","          name: name","        };","        socket.emit('setName', data);","      });","    });"],"id":249}],[{"start":{"row":87,"column":4},"end":{"row":88,"column":0},"action":"remove","lines":["",""],"id":250}],[{"start":{"row":88,"column":0},"end":{"row":95,"column":7},"action":"remove","lines":["","    socket.on('authorize', function (credentials) {","        socket.get('name', function (getErr, oldName) {","            socket.set('name', String(credentials.userName || 'Anonymous'), function (setErr) {","                updateRoster();","            });","        });","    });"],"id":251}],[{"start":{"row":87,"column":4},"end":{"row":88,"column":0},"action":"remove","lines":["",""],"id":252}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":61,"column":11},"end":{"row":61,"column":17},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":54,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1459208426228,"hash":"2bb6862e3f5c3d3902a125eb270a830e7670649c"}